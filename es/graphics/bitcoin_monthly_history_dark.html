<!DOCTYPE html>
<html>
    <head>
        <link href="https://charts.bgeometrics.com/assets/css/template.css" rel="stylesheet">
        <link href="https://charts.bgeometrics.com/assets/css/data-datatables.min.css" rel="stylesheet">
        <style>
            body {
                background: #181a1b;
                color: #e0e0e0;
            }
            #dataTable-table2 td, #dataTable-table2 th {
                white-space: nowrap;
                overflow: hidden;
                text-overflow: ellipsis;
                max-width: 70px;
                width: 70px;
                height: 30px;
                line-height: 30px;
                padding: 0 5px;
                box-sizing: border-box;
                text-align: center;
                border: 1px solid #444; /* Borde gris oscuro */
                background: #23272b;    /* Fondo celda oscuro */
                color: #e0e0e0;         /* Texto claro */
            }
            #dataTable-table2 {
                border-collapse: separate;
                border-spacing: 1px;
                background: #181a1b;
            }
            #dataTable-table2 td.dtfc-fixed-start {
                width: 70px;
                max-width: 70px;
                overflow: hidden;
                text-overflow: ellipsis;
                background: #202225;
            }
            /* Add styling for the last column */
            #dataTable-table2 td:last-child, #dataTable-table2 th:last-child {
                width: 100px;
                max-width: 100px;
            }
            .uniform-cells table {
                table-layout: fixed;
                width: 100%;
            }
            .uniform-cells table td, .uniform-cells table th {
                word-break: keep-all;
                text-overflow: ellipsis;
            }
            /* Colores para positivos/negativos */
            .positive {
                color: #7fff7f !important;
            }
            .negative {
                color: #ff7f7f !important;
            }
            /* Opcional: resaltar la fila PROMEDIO */
            tr:last-child td {
                font-weight: bold;
                background: #22262a;
            }
        </style>
    </head>
    <body>
        
<div itemprop="articleBody" class="article-body">

    <div id="table2" data-datatables="false" data-fixed-column="left:1" data-scroll-horizontal="true"
        data-value-column-gradient="1,2,3,4,5,6,7,8,9,10,11,12,13"
        data-responsive-columns="0,1,2,3,4,5,6,7,8,9,10,11,12,13"
        data-table-class="numbers-no-icon small cell-text-center last-column-bold ab-logo uniform-cells" class="loading">
        <div id="dataTable-table2_wrapper" class="dt-container dt-bootstrap5 dt-empty-footer">
            <div class="row mt-2 justify-content-between">
                <div class="d-md-flex justify-content-between align-items-center dt-layout-start col-md-auto me-auto">
                </div>
                <div class="d-md-flex justify-content-between align-items-center dt-layout-end col-md-auto ms-auto">
                </div>
            </div>
            <div class="row mt-2 justify-content-between dt-layout-table">
                <div class="d-md-flex justify-content-between align-items-center col-12 dt-layout-full col-md">
                    <div class="dt-scroll">
                        <div class="dt-scroll-head"
                            style="overflow: hidden; position: relative; border: 0px; width: 100%;">
                            <div class="dt-scroll-headInner"
                                style="box-sizing: content-box; width: 1011.95px; padding-right: 0px;">
                            </div>
                        </div>
                        <div class="dt-scroll-body" style="position: relative; overflow: auto; width: 100%;">
                            <table id="dataTable-table2"
                                class="display responsive numbers-no-icon small cell-text-center last-column-bold ab-logo dataTable dtr-inline dtfc-has-start dtfc-has-left dtfc-scrolling-end dtfc-scrolling-right"
                                style="width: 100%;">
                                    <thead>
                                        <tr>
                                            <th class="all dt-orderable-none dtfc-fixed-start dtfc-fixed-left"
                                                data-dt-column="0" rowspan="1" colspan="1"
                                                style="position: sticky; left: 0px;"><span
                                                    class="dt-column-title"></span><span class="dt-column-order"></span>
                                            </th>
                                            <th class="all dt-orderable-none" data-dt-column="1" rowspan="1"
                                                colspan="1"><span class="dt-column-title">Jan</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="2" rowspan="1"
                                                colspan="1"><span class="dt-column-title">Feb</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="3" rowspan="1"
                                                colspan="1"><span class="dt-column-title">Mar</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="4" rowspan="1"
                                                colspan="1"><span class="dt-column-title">Apr</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="5" rowspan="1"
                                                colspan="1"><span class="dt-column-title">May</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="6" rowspan="1"
                                                colspan="1"><span class="dt-column-title">Jun</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="7" rowspan="1"
                                                colspan="1"><span class="dt-column-title">Jul</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="8" rowspan="1"
                                                colspan="1"><span class="dt-column-title">Aug</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="9" rowspan="1"
                                                colspan="1"><span class="dt-column-title">Sep</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="10" rowspan="1"
                                                colspan="1"><span class="dt-column-title">Oct</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="11" rowspan="1"
                                                colspan="1"><span class="dt-column-title">Nov</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="12" rowspan="1"
                                                colspan="1"><span class="dt-column-title">Dec</span><span
                                                    class="dt-column-order"></span></th>
                                            <th class="all dt-orderable-none" data-dt-column="13" rowspan="1"
                                                colspan="1"><span class="dt-column-title">TOTAL</span><span
                                                    class="dt-column-order"></span></th>
                                        </tr>
                                    </thead>
                                <colgroup>
                                    <col data-dt-column="0" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="1" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="2" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="3" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="4" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="5" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="6" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="7" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="8" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="9" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="10" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="11" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="12" style="width: 70px; min-width: 70px;">
                                    <col data-dt-column="13" style="width: 100px; min-width: 100px;">
                                </colgroup>
                                <tbody>
                                    <tr>
                                        <td class="dtfc-fixed-start dtfc-fixed-left dtr-control"
                                            style="position: sticky; left: 0px;" tabindex="0"></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                        <td class=""></td>
                                    </tr>
                                    <tr>
                                        <td class="dtfc-fixed-start dtfc-fixed-left dtr-control"
                                            style="position: sticky; left: 0px;" tabindex="0">PROMEDIO</td>
                                        <td class="positive positive-gradient-1">10.30%</td>
                                        <td class="positive positive-gradient-1">11.85%</td>
                                        <td class="positive positive-gradient-1">12.69%</td>
                                        <td class="positive positive-gradient-1">33.17%</td>
                                        <td class="positive positive-gradient-1">22.22%</td>
                                        <td class="positive positive-gradient-1">5.69%</td>
                                        <td class="positive positive-gradient-1">8.93%</td>
                                        <td class="negative negative-gradient-1">-0.99%</td>
                                        <td class="negative negative-gradient-1">-4.52%</td>
                                        <td class="positive positive-gradient-1">29.49%</td>
                                        <td class="positive positive-gradient-1">39.91%</td>
                                        <td class="positive positive-gradient-1">9.02%</td>
                                        <td class="positive positive-gradient-2">673.13%</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                        <div class="dt-scroll-foot" style="overflow: hidden; border: 0px; width: 100%;">
                            <div class="dt-scroll-footInner">
                                <table
                                    class="display responsive numbers-no-icon small cell-text-center last-column-bold ab-logo dataTable dtfc-scrolling-end dtfc-scrolling-right"
                                    style="margin-left: 0px;">
                                    <tfoot></tfoot>
                                </table>
                            </div>
                        </div>
                        <div class="dtfc-top-blocker"
                            style="top: 0px; right: 0px; height: 30.75px; width: 1px; display: none;"></div>
                        <div class="dtfc-bottom-blocker"
                            style="bottom: 0px; right: 0px; height: 0px; width: 1px; display: none;"></div>
                    </div>
                </div>
            </div>
            <div class="row mt-2 justify-content-between">
                <div class="d-md-flex justify-content-between align-items-center dt-layout-start col-md-auto me-auto">
                </div>
                <div class="d-md-flex justify-content-between align-items-center dt-layout-end col-md-auto ms-auto">
                </div>
            </div>
            <div class="dt-autosize" style="width: 100%; height: 0px;"></div>
        </div>
    </div>
</div>

<script>
    function fillTableFromArray(dataArray) {
        // Seleccionar la tabla por su ID
        const table = document.getElementById("dataTable-table2").getElementsByTagName("tbody")[0];

        // Limpiar el contenido actual de la tabla
        table.innerHTML = "";

        // Recorrer el array y generar las filas de la tabla
        dataArray.forEach(rowData => {
            const row = document.createElement("tr");

            // Recorrer los valores de cada fila y crear celdas
            rowData.forEach((cellData, index) => {
                const cell = document.createElement("td");

                // Si es la primera columna (Year), configuramos propiedades especiales
                if (index === 0) {
                    cell.className = "dtfc-fixed-start dtfc-fixed-left dtr-control";
                    cell.style.position = "sticky";
                    cell.style.left = "0px";
                    cell.tabIndex = "0";
                    // Asegurar que el texto se muestre en una línea
                    cell.style.whiteSpace = "nowrap";
                    cell.style.overflow = "hidden";
                    cell.style.textOverflow = "ellipsis";
                }

                // Aplicar estilos para una línea uniforme a todas las celdas
                cell.style.width = index === rowData.length - 1 ? "100px" : "70px";
                cell.style.maxWidth = index === rowData.length - 1 ? "100px" : "70px";
                cell.style.height = "30px";
                cell.style.lineHeight = "30px";
                cell.style.padding = "0 5px";
                cell.style.boxSizing = "border-box";
                cell.style.textAlign = "center";
                cell.style.whiteSpace = "nowrap";
                cell.style.overflow = "hidden";
                cell.style.textOverflow = "ellipsis";

                // Asignar el valor de la celda
                cell.textContent = cellData;

                // Verificar si el valor es positivo o negativo y asignar la clase correspondiente
                if (typeof cellData === "string" && cellData.includes("%")) {
                    const numericValue = parseFloat(cellData.replace("%", ""));
                    if (!isNaN(numericValue)) {
                        if (numericValue > 0) {
                            cell.className += (index === 0 ? " " : "") + "positive positive-gradient-1";
                        } else if (numericValue < 0) {
                            cell.className += (index === 0 ? " " : "") + "negative negative-gradient-1";
                        }
                        
                        // Para la última columna (TOTAL), usar gradient-2 si es positivo
                        if (index === rowData.length - 1 && numericValue > 0) {
                            cell.className = cell.className.replace("positive-gradient-1", "positive-gradient-2");
                        }
                    }
                }

                row.appendChild(cell);
            });

            // Añadir la fila a la tabla
            table.appendChild(row);
        });
    }

    // Función para cargar y procesar el CSV
    async function loadCSVData() {
        try {
            const response = await fetch('https://charts.bgeometrics.com/files/bitcoin_monthly_yearly_returns.csv');
            const csvText = await response.text();
            
            // Parsear el CSV
            const lines = csvText.split('\n');
            const dataArray = [];
            
            // Procesar todas las líneas excepto la cabecera
            for (let i = 1; i < lines.length; i++) {
                // Ignorar líneas vacías
                if (lines[i].trim() === '') continue;
                
                // Ignorar líneas de comentarios
                let line = lines[i];
                if (line.startsWith('//')) {
                    continue;
                }
                
                // Dividir la línea en celdas
                const cells = line.split(',');
                
                // Agregar formato de porcentaje a los valores numéricos (excepto la primera columna)
                for (let j = 1; j < cells.length; j++) {
                    if (cells[j] && cells[j].trim() !== '' && !isNaN(parseFloat(cells[j]))) {
                        cells[j] = parseFloat(cells[j]).toFixed(2) + '%';
                    }
                }
                
                dataArray.push(cells);
            }
            
            fillTableFromArray(dataArray);
        } catch (error) {
            console.error('Error al cargar el CSV:', error);
        }
    }

    // Llamar al método al cargarse la página
    document.addEventListener("DOMContentLoaded", loadCSVData);
</script>

    </body>
</html>