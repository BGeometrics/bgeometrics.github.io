<!DOCTYPE html>
<html>
<head>
    <title>Capitalization</title>

    <script async src="https://www.googletagmanager.com/gtag/js?id=G-ZR3ZFTF2FK"></script> 
    <script> window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-ZR3ZFTF2FK'); </script>
</head>
<body>
<link rel="stylesheet" type="text/css" href="https://code.highcharts.com/css/stocktools/gui.css">
<link rel="stylesheet" type="text/css" href="https://code.highcharts.com/css/annotations/popup.css">
<script src="https://code.highcharts.com/stock/highstock.js"></script>
<script src="https://code.highcharts.com/stock/indicators/indicators-all.js"></script>
<script src="https://code.highcharts.com/stock/modules/drag-panes.js"></script>
<script src="https://code.highcharts.com/modules/annotations-advanced.js"></script>
<script src="https://code.highcharts.com/modules/price-indicator.js"></script>
<script src="https://code.highcharts.com/modules/full-screen.js"></script>
<script src="https://code.highcharts.com/modules/stock-tools.js"></script>
<script src="https://code.highcharts.com/stock/modules/heikinashi.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>

<div id="container" style="width:100%; height:600px;"></div>

    <script>
        (async () => {
            const data_market_cap = await fetch(
                'https://charts.bgeometrics.com/files/market_cap.json'
            ).then(response => response.json());
            const data_investor_cap = await fetch(
                'https://charts.bgeometrics.com/files/investor_cap.json'
            ).then(response => response.json());
            const data_thermo_cap = await fetch(
                'https://charts.bgeometrics.com/files/thermo_cap.json'
            ).then(response => response.json());
            const data_realized_cap = await fetch(
                'https://charts.bgeometrics.com/files/realized_cap.json'
            ).then(response => response.json());
            const thermocap_realizedcap_ratio = await fetch(
                'https://charts.bgeometrics.com/files/thermocap_realizedcap_ratio.json'
            ).then(response => response.json());
 
        var chart = Highcharts.stockChart('container', {
            stockTools: {
                gui: {
                    buttons: ['linLogSwitch', 'separator', 'indicators', 'separator', 'simpleShapes', 'lines', 'crookedLines', 'measure', 'advanced', 'separator', 'verticalLabels', 'flags', 'separator', 'zoomChange', 'fullScreen', 'separator', 'currentPriceIndicator', 'toggleAnnotations'],
                    definitions: {
                        linLogSwitch: {
                            className: 'highcharts-lin-log-switch',
                            symbol: 'logarithmic.svg'
                        }
                    }
                }
            },
            navigation: {
                bindings: {
                    linLogSwitch: {
                        className: 'highcharts-lin-log-switch',
                        init: function (button) {
                            const chart = this.chart,
                                isLogarithmic = chart.yAxis[1].logarithmic,
                                axisTypeIcon = isLogarithmic ? 'logarithmic.svg' : 'linear.svg',
                                iconURL = 'https://code.highcharts.com/9.2.2/gfx/stock-icons/' + axisTypeIcon;

                            chart.yAxis[0].update({
                                type: isLogarithmic ? 'linear' : 'logarithmic',
                                minorTickInterval: isLogarithmic ? null : 'auto'
                            }, false)    
                            chart.yAxis[1].update({
                                type: isLogarithmic ? 'linear' : 'logarithmic',
                                minorTickInterval: isLogarithmic ? null : 'auto'
                            });

                            // Change the button icon.
                            button.firstChild.style['background-image'] = `url(${iconURL})`;

                            // Deselect button after click.
                            Highcharts.fireEvent(
                                this,
                                'deselectButton',
                                { button: button }
                            );
                        }
                    }
                }
            },
            title: {
                text: 'Bitcoin: Capitalization',
                align: 'left',
            },

            chart: {
                renderTo: 'container',
                events: {
                    load: function() {
                        var image = new Image();
                        var adresse_image = "https://charts.bgeometrics.com/assets/img/cropped-Bcubium_logo_colores_ico_128_128-3.png";
                        image.src = adresse_image;

                        var height_image = 128;
                        var width_image = 128;
                        var textX = this.plotLeft + (this.plotWidth * 0.5);
                        var textY = this.plotTop + (this.plotHeight * 0.5);
                        var position_x = textX - width_image / 2;
                        var position_y = textY - height_image / 2;
                        console.log(position_x + " " + position_y);
                        this.renderer.image(adresse_image, position_x, position_y, width_image, height_image)
                            .css({position: 'relative', "margin-left": "-90px", opacity: 0.1})
                            .attr({zIndex: 1})
                            .add();
                    }
                }
            },

            yAxis: [{
                type: 'logarithmic',
            }, {
                title: {
                    text: 'Capitalization (USD)'
                },
                type: 'logarithmic',
            }],

            series: [{
                id:'market_cap',
                name: 'Market Cap',
                data: data_market_cap,
                tooltip: {
                    valueDecimals: 2
                },
                yAxis: 0
            }, {
                id:'realized_cap',
                name: 'Realized Cap',
                data: data_realized_cap,
                tooltip: {
                    valueDecimals: 2
                },
                yAxis: 0
            }, {
                id:'investor_cap',
                name: 'Investor Cap',
                data: data_investor_cap,
                tooltip: {
                    valueDecimals: 2
                },
                yAxis: 0
            }, {
                id:'thermo_cap',
                name: 'Thermo Cap',
                data: data_thermo_cap,
                tooltip: {
                    valueDecimals: 2
                },
                yAxis: 0
            }],

            legend:{
                enabled:true,
                floating: true,
                verticalAlign: 'top',
                align:'center'
            },

            rangeSelector: {
                selected: 5
            },

            credits: {
                text: 'Power by BGeometrics.com',
                href: 'https://charts.bgeometrics.com',
                style: {
                    font: '11px sans-serif, Verdana, "Trebuchet MS"'
                },
                position: {
                    align: 'right',
                    x: -70,
                    y: -124
                }                
            },
            responsive: {
                rules: [{
                    condition: {
                        maxWidth: 800
                    },
                    chartOptions: {
                        rangeSelector: {
                            inputEnabled: false
                        }
                    }
                }]
            }
        });
    })();

    </script>
    <section>
        <div>
            <h4>Bitcoin Capitalization</h4>
            <p>
                Market capitalization (Marketcap) refers to the total value of all units of the cryptocurrency in circulation. It is calculated by multiplying the current price of one unit of the cryptocurrency by the total number of units in circulation.
                The formula is the following:  
            </p> 
            <span class="katex"><span class="katex-mathml">
                <math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mrow><mtext>Market Capitalization</mtext></mrow><mo>=</mo><mtext>Current bitcoin price</mtext><mo>×</mo><mrow><mtext>Total amount of BTC in circulation</mtext></mrow></mrow><annotation encoding="application/x-tex">\text{Market Capitalization} = \text{Current Price BTC} \times \text{Total amount of BTC in circulation}</annotation></semantics>
                </math>
            </span>
            <p>
                Realized capitalization (Realizedcap) is calculated by multiplying the number of bitcoins in circulation by the price at which the last purchase/spend/transaction was made.
                Mathematically it can be expressed as follows:    
            </p>
            <span class="katex-mathml">
                <math xmlns="http://www.w3.org/1998/Math/MathML">
                    <semantics><mrow><mtext>Realized Capitalization</mtext><mo>=</mo><mo>∑</mo><mo stretchy="false">(</mo><mtext>Bitcoin&nbsp;Units</mtext><mo>×</mo><mtext>Last&nbsp;Transaction&nbsp;Price</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{Realized Capitalization} = \sum (\text{Bitcoin Units} \times \text{Last Transaction Price})</annotation>
                    </semantics>
                </math>
            </span>
            <p>
                Thermo capitalization (Thermocap) is the sum of all mined BTC for the price they had when mined.
                Thermocap could be called the primary market.
            </p>
            <span class="katex-mathml">
                <math xmlns="http://www.w3.org/1998/Math/MathML">
                    <semantics><mrow><mtext>Thermo Capitalization</mtext><mo>=</mo><mo>∑</mo><mo stretchy="false">(</mo><mtext>Issuance</mtext><mo>×</mo><mtext>Price</mtext><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">\text{Thermo Capitalization} = \sum (\text{Issuance} \times \text{Price})</annotation>
                    </semantics>
                </math>
            </span>
            <p>
                Coins are revalued each time they are spent on-chain, creating an evolving realized valuation as owners make profits, losses, or spend until they break even.
                ARK Invest previously defined this metric in the white paper <a href="https://ark-invest.com/white-papers/cointime-economics/?utm_campaign=Cointime%20Economics&utm_content=261766789">cointime-economics</a>, as the investor's capitalization, calculated by adding the value obtained in all transactions (T) in all block heights (N) (excluding coinbase mining transactions).
            </p>
            <span class="katex-mathml">
                <math xmlns="http://www.w3.org/1998/Math/MathML">
                    <semantics><mrow><mtext>Investor Capitalization</mtext><mo>=</mo><mo>Realized Capitalization</mo><mo>-</mo><mtext>Thermo Capitalization</mtext></mrow></semantics>
                </math>
            </span>

        </div>
    </section>
</body>
</html>